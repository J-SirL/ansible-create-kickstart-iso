# Generated by Anaconda 34.25.3.8
# Generated by pykickstart v3.32
#version=RHEL9
# Use graphical install
graphical
repo --name="AppStream" --baseurl=file:///run/install/sources/mount-0000-cdrom/AppStream

%addon com_redhat_kdump --enable --reserve-mb='auto'

%end

# Keyboard layouts
keyboard --xlayouts='se'
# System language
lang en_GB.UTF-8

# Network information
network  --bootproto=dhcp --device=enp56s0u2u1i5 --ipv6=auto --activate
network  --hostname=developer.sitedevelopments.lan

# Use CDROM installation media
cdrom

%packages
@^workstation-product-environment
@backup-client
@console-internet
@container-management
@development
@gnome-apps
@graphical-admin-tools
@headless-management
@internet-applications
@office-suite
@remote-desktop-clients
@scientific
@security-tools
@smart-card
@system-tools

%end

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.6.0
ignoredisk --only-use=nvme0n1
# Partition clearing information
clearpart --none --initlabel

# Disk partitioning information
part /boot --fstype="xfs" --ondisk=nvme0n1 --size=1024

# Modify the size of the physical volume to account for the new EFI partition size
part pv.1050 --fstype="lvmpv" --ondisk=nvme0n1 --size=975047  # Reduced by 500MB

# EFI partition
part /boot/efi --fstype="efi" --ondisk=nvme0n1 --size=500 --fsoptions="umask=0077,shortname=winnt" --label=ESP

volgroup almalinux_developer --pesize=4096 pv.1050
logvol swap --fstype="swap" --size=7926 --name=swap --vgname=almalinux_developer
logvol /home --fstype="xfs" --size=307200 --name=home --vgname=almalinux_developer
logvol / --fstype="xfs" --grow --maxsize=71680 --size=1024 --name=root --vgname=almalinux_developer

# Reduce the size of /opt by 500MB
logvol /opt --fstype="xfs" --size=588234 --name=opt --vgname=almalinux_developer  # Reduced by 500MB


# System timezone
timezone Europe/Stockholm --utc

#Root password
rootpw --lock
user --groups=wheel --name={{ ks_user }} --password={{ ks_pass }} --iscrypted --gecos="Johan SÃ¶rell"

